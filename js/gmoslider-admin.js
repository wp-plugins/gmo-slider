(function(b){var k=function(){var c={isAdminInitialized:!1,init:function(){c.isAdminInitialized||(c.isAdminInitialized=!0,b(document).trigger("gmosliderAdminReady"))}};b(document).ready(c.init);b(window).load(c.init);return c}();k.generalSettings=function(){var c={isCurrentPage:!1,init:function(){"gmoslider_page_general_settings"===window.pagenow&&(c.isCurrentPage=!0,c.activateUserCapabilities())},activateUserCapabilities:function(){b("input").change(function(a){a=b(a.currentTarget);var e,d;"checkbox"== a.attr("type").toLowerCase()&&(e=a.attr("id").split("_"),d=e.shift(),e=e.join("_"),"gmoslider-edit-gmosliders"!==d||a.attr("checked")?"gmoslider-add-gmosliders"!==d&&"gmoslider-delete-gmosliders"!==d||b("#gmoslider-edit-gmosliders_"+e).attr("checked",!0):(b("#gmoslider-add-gmosliders_"+e).attr("checked",!1),b("#gmoslider-delete-gmosliders_"+e).attr("checked",!1)))})}};b(document).on("gmosliderAdminReady",c.init);return c}();k.generalSettings.customStyles=function(){var c={init:function(){k.generalSettings.isCurrentPage&& c.activateNavigation()},activateNavigation:function(){b(".nav-tab").click(function(a){a=b(a.currentTarget);var e=b(".nav-tab-active");e.removeClass("nav-tab-active");a.addClass("nav-tab-active");b(e.attr("href").replace("#",".")).hide();b(a.attr("href").replace("#",".")).show();e=b("input[name=_wp_http_referer]");e.attr("value",e.attr("value").split("#").shift()+a.attr("href"))});b('a[href="#'+document.URL.split("#").pop()+'"]').trigger("click")}};b(document).on("gmosliderAdminReady",c.init);return c}(); k.generalSettings.customStyles=function(){var c={init:function(){k.generalSettings.isCurrentPage&&(c.activateActionButtons(),c.activateDeleteButtons())},activateActionButtons:function(){b(".custom-styles-tab .styles-list .style-action.style-default").click(function(a){var e=b(a.currentTarget);a=e.closest("li").find(".style-title").html();var e=e.closest("li").find(".style-content").html(),d=window.gmoslider_admin_script_generalSettings,g="gmoslider-custom-styles",h,f;"string"!==typeof e||0>=e.length|| ("object"===typeof d&&("object"===typeof d.localization&&void 0!==d.localization.newCustomizationPrefix&&0<d.localization.newCustomizationPrefix.length&&(a=d.localization.newCustomizationPrefix+" - "+a),"object"===typeof d.data&&void 0!==d.data.customStylesKey&&0<d.data.customStylesKey.length&&(g=d.data.customStylesKey)),d=g+"_"+(c.getHighestCustomStyleID()+1),f=b(".custom-styles-tab .custom-style-templates"),h=f.find(".style-editor").clone(),h.addClass(d),h.find(".new-custom-style-title").attr("value", a),h.find(".new-custom-style-content").html(e),h.find(".new-custom-style-title").attr("name",g+"["+d+"][title]"),h.find(".new-custom-style-content").attr("name",g+"["+d+"][style]"),b(".custom-styles-tab .style-editors").append(h),setTimeout(function(){h.fadeIn(200)},200),e=f.find(".custom-styles-list-item").clone(!0),e.removeClass("custom-styles-list-item"),e.find(".style-title").html(a),e.find(".style-action").addClass(d),e.find(".style-delete").addClass(d),a=b(".custom-styles-tab .styles-list .custom-styles-list"), a.find(".no-custom-styles-found").remove(),a.append(e))});b(".custom-styles-tab .styles-list .style-action, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-action").click(function(a){var e=b(a.currentTarget).attr("class").split(" ")[1];void 0!==e&&(b(".custom-styles-tab .style-editors .style-editor").each(function(a,e){b(e).fadeOut(200)}),setTimeout(function(){b(".style-editor."+e).fadeIn(200)},200))})},activateDeleteButtons:function(){b(".custom-styles-tab .styles-list .style-delete, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-delete").click(function(a){a= b(a.currentTarget);var e=a.attr("class").split(" ")[1],d=window.gmoslider_admin_script_generalSettings,c="Are you sure you want to delete this custom style?";void 0!==e&&("object"===typeof d&&"object"===typeof d.localization&&void 0!==d.localization.confirmDeleteMessage&&0<d.localization.confirmDeleteMessage.length&&(c=d.localization.confirmDeleteMessage),confirm(c)&&(b(".custom-styles-tab .style-editors .style-editor."+e).remove(),a.closest("li").remove()))})},getHighestCustomStyleID:function(){var a= 0;b(".custom-styles-tab .style-editors .style-editor").each(function(e,d){var c=parseInt(b(d).attr("class").split("_").pop(),10);c>a&&(a=c)});return parseInt(a,10)}};b(document).on("gmosliderAdminReady",c.init);return c}();k.editGMOslider=function(){var c={isCurrentPage:!1,init:function(){"gmoslider"===window.pagenow&&(c.isCurrentPage=!0,c.activateSettingsVisibilityDependency())},activateSettingsVisibilityDependency:function(){b(".depends-on-field-value").each(function(a,e){var d=b(e),g=d.attr("class").split(" "), d=d.closest("tr");b('input[name="'+g[1]+'"]:checked').val()==g[2]?d.show():d.hide();b('input[name="'+g[1]+'"]').change(g,function(a){var d=b("."+g[3]).closest("tr");b(a.currentTarget).val()==g[2]?c.animateElementVisibility(d,!0):c.animateElementVisibility(d,!1)})})},animateElementVisibility:function(a,e){var d=b(a);void 0===e&&(d.stop(!0,!0),e=!d.is(":visible"));e?(d.stop(!0,!0).show().css("background-color","#c0dd52"),setTimeout(function(){d.stop(!0,!0).animate({"background-color":"transparent"}, 1500)},500)):(d.stop(!0,!0).css("background-color","#d44f6e"),setTimeout(function(){d.stop(!0,!0).hide(1500,function(){d.css("background-color","transparent")})},500))}};b(document).on("gmosliderAdminReady",c.init);return c}();k.editGMOslider.slideManager=function(){var c={uploader:null,init:function(){k.editGMOslider.isCurrentPage&&(c.activateUploader(),c.activate(),c.activeOldUploader())},activateUploader:function(){b(".gmoslider-insert-image-slide").on("click",function(a){a.preventDefault();var b; c.uploader||(b=window.gmoslider_admin_script_editGMOslider,a="","object"===typeof b&&"object"===typeof b.localization&&void 0!==b.localization.uploaderTitle&&0<b.localization.uploaderTitle.length&&(a=b.localization.uploaderTitle),c.uploader=wp.media.frames.gmoslider_jquery_image_galler_uploader=wp.media({frame:"select",title:a,multiple:!0,library:{type:"image"}}),c.uploader.on("select",function(){var b=c.uploader.state().get("selection").toJSON(),a,e;for(e in b)b.hasOwnProperty(e)&&(a=b[e],c.insertImageSlide(a.id, a.title,a.description,a.url,a.alt))}));c.uploader.open()})},activeOldUploader:function(){var a=b("#gmoslider-slide-inserter-popup"),e=b("#gmoslider-slide-inserter-popup-background"),d=a.find("#search");e.height(b(document).outerHeight(!0));a.css({top:parseInt(b(window).height()/2-a.outerHeight(!0)/2,10),left:parseInt(b(window).width()/2-a.outerWidth(!0)/2,10)});d.focus();c.getSearchResults();a.find("#close").click(c.closePopup);e.click(c.closePopup);a.find("#search-submit").click(c.getSearchResults); d.keypress(function(b){13==b.which&&(b.preventDefault(),c.getSearchResults())});b("#gmoslider-insert-image-slide").click(function(){a.css({display:"block"});e.css({display:"block"})});b("#gmoslider-insert-text-slide").click(c.insertTextSlide);b("#gmoslider-insert-video-slide").click(c.insertVideoSlide);b(".gmoslider-delete-slide").click(function(a){c.deleteSlide(b(a.currentTarget).closest(".sortable-slides-list-item"))})},activate:function(){c.indexSlidesOrder();b(".sortable-slides-list").sortable({revert:!0, placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){c.indexSlidesOrder()},cancel:"input, select, textarea"});b(".wp-color-picker-field").wpColorPicker({width:234});b(".open-slides-button").on("click",function(a){a.preventDefault();b(".sortable-slides-list .sortable-slides-list-item").each(function(a,d){var c=b(d);c.find(".inside").is(":visible")||c.find(".handlediv").trigger("click")})});b(".close-slides-button").on("click",function(a){a.preventDefault();b(".sortable-slides-list .sortable-slides-list-item").each(function(a, d){var c=b(d);c.find(".inside").is(":visible")&&c.find(".handlediv").trigger("click")})})},deleteSlide:function(b){var c="Are you sure you want to delete this slide?",d=window.gmoslider_admin_script_editGMOslider;"object"===typeof d&&"object"===typeof d.localization&&void 0!==d.localization.confirm&&0<d.localization.confirm.length&&(c=d.localization.confirm);confirm(c)&&b.remove()},indexSlidesOrder:function(){b(".sortable-slides-list .sortable-slides-list-item").each(function(a,c){b.each(b(c).find("input, select, textarea"), function(c,e){var h=b(e),f=h.attr("name");void 0===f||0>=f.length||(f=f.replace(/[\[\]']+/g," ").split(" "),h.attr("name",f[0]+"["+(a+1)+"]["+f[2]+"]"))})})},getSearchResults:function(a){var e=b("#gmoslider-slide-inserter-popup"),d=e.find("#results"),g=[];a=parseInt(a,10);isNaN(a)&&(a=0,d.html(""));b.each(d.find(".result-table-row"),function(a,c){g.push(parseInt(b(c).attr("data-attachment-id"),10))});b.post(window.ajaxurl,{action:"gmoslider_slide_inserter_search_query",search:e.find("#search").attr("value"), offset:a,attachmentIDs:g},function(a){d.append(a);d.find(".insert-attachment").unbind("click").click(function(a){a=b(a.currentTarget).closest("tr");c.insertImageSlide(a.attr("data-attachment-id"),a.find(".title").text(),a.find(".description").text(),a.find(".image img").attr("src"),a.find(".title").text())});(a=b(".load-more-results"))&&a.click(function(a){a=b(a.currentTarget);var d=a.attr("data-offset");a.closest("tr").hide();isNaN(parseInt(d,10))||c.getSearchResults(d)})})},insertImageSlide:function(a, e,d,g,h){var f=b(".image-slide-template").find(".sortable-slides-list-item").clone(!0,!0);f.find(".attachment").attr("src",g);f.find(".attachment").attr("title",e);f.find(".attachment").attr("alt",h);f.find(".title").attr("value",e);f.find(".description").html(d);f.find(".alternativeText").attr("value",h);f.find(".postId").attr("value",a);f.find(".title").attr("name","slides[0][title]");f.find(".titleElementTagID").attr("name","slides[0][titleElementTagID]");f.find(".description").attr("name","slides[0][description]"); f.find(".descriptionElementTagID").attr("name","slides[0][descriptionElementTagID]");f.find(".url").attr("name","slides[0][url]");f.find(".urlTarget").attr("name","slides[0][urlTarget]");f.find(".alternativeText").attr("name","slides[0][alternativeText]");f.find(".noFollow").attr("name","slides[0][noFollow]");f.find(".type").attr("name","slides[0][type]");f.find(".postId").attr("name","slides[0][postId]");b(".sortable-slides-list").prepend(f);c.indexSlidesOrder()},insertTextSlide:function(){var a= b(".text-slide-template").find(".sortable-slides-list-item").clone(!0,!0);a.find(".title").attr("name","slides[0][title]");a.find(".titleElementTagID").attr("name","slides[0][titleElementTagID]");a.find(".description").attr("name","slides[0][description]");a.find(".descriptionElementTagID").attr("name","slides[0][descriptionElementTagID]");a.find(".textColor").attr("name","slides[0][textColor]");a.find(".color").attr("name","slides[0][color]");a.find(".url").attr("name","slides[0][url]");a.find(".urlTarget").attr("name", "slides[0][urlTarget]");a.find(".noFollow").attr("name","slides[0][noFollow]");a.find(".type").attr("name","slides[0][type]");a.find(".color, .textColor").wpColorPicker();b(".sortable-slides-list").prepend(a);c.indexSlidesOrder()},insertVideoSlide:function(){var a=b(".video-slide-template").find(".sortable-slides-list-item").clone(!0,!0);a.find(".videoId").attr("name","slides[0][videoId]");a.find(".showRelatedVideos").attr("name","slides[0][showRelatedVideos]");a.find(".type").attr("name","slides[0][type]"); b(".sortable-slides-list").prepend(a);c.indexSlidesOrder()},closePopup:function(){b("#gmoslider-slide-inserter-popup, #gmoslider-slide-inserter-popup-background").css({display:"none"})}};b(document).on("gmosliderAdminReady",c.init);return c}();k.shortcode=function(){var c={init:function(){c.activateShortcodeInserter()},activateShortcodeInserter:function(){b(".insertGMOsliderShortcodeGMOsliderInsertButton").click(function(){var a="No gmoslider selected.",c="gmoslider_slider",d=parseInt(b("#insertGMOsliderShortcodeGMOsliderSelect").val(), 10),g=window.gmoslider_admin_script_shortcode;"object"===typeof g&&("object"===typeof g.data&&void 0!==g.data.shortcode&&0<g.data.shortcode.length&&(c=g.data.shortcode),"object"===typeof g.localization&&void 0!==g.localization.undefinedGMOslider&&0<g.localization.undefinedGMOslider.length&&(a=g.localization.undefinedGMOslider));if(isNaN(d))return alert(a),!1;send_to_editor("["+c+" id='"+d+"']");tb_remove();return!0});b(".insertGMOsliderShortcodeCancelButton").click(function(){tb_remove();return!1})}}; b(document).on("gmosliderAdminReady",c.init);return c}();window.gmoslider_admin_script=k})(jQuery);(function(){"gmoslider"===window.pagenow&&jQuery(document).ready(function(){var b=jQuery("#gmosidebar");0<b.length&&!0===b.hasClass("closed")&&b.removeClass("closed")})})();